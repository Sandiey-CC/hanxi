<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">
	<title>韩曦经销商管理端</title>

	<!-- Google font file. If you want you can change. -->
	<link href="https://fonts.googleapis.com/css?family=Nunito:300,400,600,700,900" rel="stylesheet">

	<!-- Fontawesome font file css -->
	<link rel="stylesheet" href="https://www.jq22.com/jquery/font-awesome.4.7.0.css">

	<!-- Animate css file for css3 animations. for more : https://daneden.github.io/animate.css -->
	<!-- Only use animate action. If you dont use animation, you don't have to add.-->
	<link rel="stylesheet" type="text/css" href="../static/css/animate.css">
	<link rel="stylesheet" type="text/css" href="../static/css/cryptocoins.css">
	<link rel="stylesheet" type="text/css" href="../static/plugins/c3-chart/c3.css">
	<link rel="stylesheet" href="../static/css/layui.css">
	<!-- Template global css file. Requared all pages -->
	<link rel="stylesheet" type="text/css" href="../static/css/global.style.css">
	<link rel="stylesheet" href="../static/css/common.showInfo.css">
	<!-- Swiper slider css file -->
	<link rel="stylesheet" href="../static/css/swiper.min.css">

	<!--turbo slider plugin css file -->
	<link rel="stylesheet" href="https://www.jq22.com/jquery/bootstrap-4.2.1.css">
	<link rel="stylesheet" type="text/css" href="../static/plugins/turbo-slider/turbo.css">

</head>

<body>

<div class="wrapper ">
	<div class="nav-menu">
		<nav class="menu">
			<!-- Menu navigation start -->
			<div class="nav-container">
				<ul class="main-menu">
					<li class="active">
						<a href="dealer_index.html"><img src="../static/img/content/icons/1.png" alt=""><strong class="special">主页</strong> </a>
					</li>
					<li class="">
						<a href="dealer_list.html"><img src="../static/img/content/icons/2.png" alt=""><strong class="special">经销商管理</strong> </a>
					</li>
					<li class="">
						<a href="javascript:void(0);"><img src="../static/img/content/icons/3.png" alt=""><strong class="special">订单管理</strong> <span class="fa fa-angle-down"></span></a>
						<ul>
							<li><a href="dealer_orders.html" data-loader="show">我的订单</a></li>
							<li><a href="dealer_sendorders.html" data-loader="show">发货订单</a></li>
						</ul>
					</li>

					<li class="">
						<a href="dealer_add_product2.html"><img src="../static/img/content/icons/6.png" alt=""><strong class="special">入库管理</strong> </a>
					</li>
					<li>
						<a href="dealer_code.html"><img src="../static/img/content/icons/10.png" alt=""><strong class="special">生成授权码</strong></a>
					</li>
					<li>
						<a href="dealer_Fleeing.html"><img src="../static/img/content/icons/4.png" alt=""><strong class="special">防伪/窜货查询</strong></a>
					</li>
					<li class="">
						<a href="dealer_Info.html"><img src="../static/img/content/icons/5.png" alt=""><strong class="special">个人中心</strong> </a>
					</li>
					<li class="">
						<a href="setting.html"><img src="../static/img/content/icons/11.png" alt=""><strong class="special">设置</strong> </a>
					</li>
				</ul>
			</div>
			<!-- Menu navigation end -->
		</nav>
	</div>
	<div class="wrapper-inline">

		<!-- Header area start -->
		<header class="no-background"> <!-- extra class no-background -->
			<a class="go-back-link" href="javascript:history.back();"><i class="fa fa-arrow-left"></i></a>
			<div class="navi-menu-button">
				<em></em>
				<em></em>
				<em></em>
			</div>
		</header>
		<!-- Header area end -->

		<!-- Page content start -->
		<main class="margin mt-0">

			<div class="dash-balance">
				<div class="dash-content relative">
					<h3 class="w-text" >欢迎你！<span id="curName"><a href="dealer_login.html">请登录</a></span></h3>
				</div>
			</div>

			<section class="container" id="main">
				<h4 class="title-main">个人历史订单</h4>

				<div class="search">
					<form id="searchForm" action="#" method="post" onsubmit="return false">
						<div class="layui-form-item" >
							<div class="layui-inline">
								<div class="layui-input-block">
									<input type="text" name="key" id="key" autocomplete="off" placeholder="请输入订单编号" class="layui-input">
								</div>
							</div>
							<div class="layui-inline">
								<div class="layui-input-block">
									<button type="submit" class="layui-btn" lay-submit="" @click="searchById">搜索</button>
								</div>
							</div>
						</div>

					</form>
				</div>

				<ul class="transaction-list list-unstyled">


					<li v-for="r in rows">
						<div class="d-flex align-items-center justify-content-between">
							<div class="d-flex align-items-center">
								<img class="img-xs" src="../static/img/content/s1.png" alt="coin image">
								<div class="ml-10">
									<h4 class="coin-name">{{r.id}}</h4>
									<small><button class="layui-btn-radius" style="width: 50px" @click="showSecurityCode(r.id)">防伪码</button></small>
									<small class="text-muted"> <span class="ml-10">{{r.createTime}}</span></small>
								</div>
							</div>
							<div>
								<small class="d-block mb-0 txt-green">{{r.state}}</small>
								<small class="text-muted d-block">{{r.price}}</small>
							</div>
						</div>
					</li>
				</ul>




			</section>

			<div class="showInfo" id="showSecurityCode" style="height: 70px;width: 300px; margin-left: 600px; margin-top: 300px">
				<div class="content">
					<div class="info">
						<table>
							<tr>
								<td><label>防伪码</label></td>
								<td><input type="text" id="SecurityCode"/></td>
							</tr>
							<tr>
								<td></td>
								<td><button class="btn btn-primary" onclick="closeSecurityCode()">确定</button></td>
							</tr>
						</table>
					</div>
				</div>
			</div>

			<footer>
				<div class="container">
					<ul>
						<li><a href="#"><i class="fa fa-facebook"></i></a></li>
						<li><a href="#"><i class="fa fa-twitter"></i></a></li>
						<li><a href="#"><i class="fa fa-google"></i></a></li>
						<li><a href="#"><i class="fa fa-instagram"></i></a></li>
					</ul>
					<p>Copyright © All Right <a href="#" title="jq22">Reserved</a></p>
				</div>
			</footer>
		</main>
		<!-- Page content end -->
	</div>
</div>

<!--Page loader DOM Elements. Requared all pages-->
<div class="sweet-loader">
	<div class="box">
		<div class="circle1"></div>
		<div class="circle2"></div>
		<div class="circle3"></div>
	</div>
</div>

<!-- JQuery library file. requared all pages -->
<script src="https://www.jq22.com/jquery/jquery-1.10.2.js"></script>

<!-- Swiper JS -->
<script src="../static/js/swiper.min.js"></script>

<!-- Template global script file. requared all pages -->
<script src="../static/js/global.script.js"></script>
<script src="../static/vue/vue.js"></script>
<script src="../static/vue/axios.min.js"></script>

<script>

	function closeSecurityCode(){
		document.getElementById('showSecurityCode').style.display = "none";
	}

	$(function(){

		$.post("../dealer/getCurDealer",function(obj){
			$("#curName").html(obj.dealerName);
		},"json")

		//alert(curName)
		$.getJSON('orders/dealerHisOrders', function (result, status) {
			// console.log(curName);
			console.log(result);
			var v = new Vue({
				el: '#main',
				data: {
					rows: result,
				},
				methods:{

					showSecurityCode(id) {
						console.log(id)
						document.getElementById('showSecurityCode').style.display = "inline";

						axios.post('http://localhost:8080/orders/showSecurityCode',{
							id:id
						}).then(data =>{
							console.log(data)
							document.getElementById('SecurityCode').value = data.data;
						}).catch(error => {
							console.log(error);
						})

					},

					searchById(){
						var searchKey = $('#key').val();

						axios.get('http://localhost:8080/orders/getOrdersListByIdKey?key='+searchKey).then(data =>{
							console.log(data)
							this.rows = data.data;
						}).catch(error => {
							console.log(error);
						})
					},
				}

			});
		});

	});


</script>

</body>

</html>
